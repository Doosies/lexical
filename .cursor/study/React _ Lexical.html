<p>Skip to main contentPlaygroundDocsAPICommunityiOSGalleryGitHubiOS GitHub</p>
<h3 id="react">React</h3>
<p>
  Lexical provides LexicalCollaborationPlugin and useCollaborationContext hook
  within @lexical/react to accelerate creation of the collaborative React backed
  editors. This is on top of the Yjs bindings provided by @lexical/yjs . tip
  Clone Lexical GitHub repo, run npm i &amp;&amp; npm run start and open
  <a href="http://localhost:3000/split/?isCollab=true">
    http://localhost:3000/split/?isCollab=true
  </a>
  to launch playground in collaborative mode.
</p>
<h4 id="getting-started">Getting started</h4>
<p>
  This guide is based on examples/react-rich example.
  <strong>Install minimal set of the required dependencies:</strong>
  $ npm i -S @lexical/react @lexical/yjs lexical react react-dom y-websocket yjs
  note y-websocket is the only officially supported Yjs connection provider at
  this point. Although other providers may work just fine.
  <strong>Get WebSocket server running:</strong>
  This allows different browser windows and different browsers to find each
  other and sync Lexical state. On top of this YPERSISTENCE allows you to save
  Yjs documents in between server restarts so clients can simply reconnect and
  keep editing. $ HOST=localhost PORT=1234 YPERSISTENCE=./yjs-wss-db npx
  y-websocket
</p>
<p>
  <strong>Get basic collaborative Lexical setup:</strong>
  import { $getRoot , $createParagraphNode , $createTextNode } from
  &#39;lexical&#39; ; import { LexicalComposer } from
  &#39;@lexical/react/LexicalComposer&#39; ; import { ContentEditable } from
  &#39;@lexical/react/LexicalContentEditable&#39; ; import {
  LexicalErrorBoundary } from &#39;@lexical/react/LexicalErrorBoundary&#39; ;
  import { RichTextPlugin } from &#39;@lexical/react/LexicalRichTextPlugin&#39;
  ; import { CollaborationPlugin } from
  &#39;@lexical/react/LexicalCollaborationPlugin&#39; ; import * as Y from
  &#39;yjs&#39; ; import { $initialEditorState } from
  &#39;./initialEditorState&#39; ; import { WebsocketProvider } from
  &#39;y-websocket&#39; ; function Editor ( ) { const initialConfig = { // NOTE:
  This is critical for collaboration plugin to set editor state to null. It //
  would indicate that the editor should not try to set any default state // (not
  even empty one), and let collaboration plugin do it instead editorState : null
  , namespace : &#39;Demo&#39; , nodes : [ ] , onError : ( error : Error ) =&gt;
  { throw error ; } , theme : { } , } ; const providerFactory = useCallback ( (
  id : string , yjsDocMap : Map &lt; string , Y . Doc &gt; ) =&gt; { const doc =
  getDocFromMap ( id , yjsDocMap ) ; return new WebsocketProvider (
  &#39;ws://localhost:1234&#39; , id , doc , { connect : false , } ) ; } , [ ] ,
  ) ; return ( &lt; LexicalComposer initialConfig = { initialConfig } &gt; &lt;
  RichTextPlugin contentEditable = { &lt; ContentEditable className = &#34;
  editor-input &#34; /&gt; } placeholder = { &lt; div className = &#34;
  editor-placeholder &#34; &gt; Enter some rich text... &lt;/ div &gt; }
  ErrorBoundary = { LexicalErrorBoundary } /&gt; &lt; CollaborationPlugin id =
  &#34; lexical/react-rich-collab &#34; providerFactory = { providerFactory } //
  Optional initial editor state in case collaborative Y.Doc won&#39;t // have
  any existing data on server. Then it&#39;ll use this value to populate editor.
  // It accepts same type of values as LexicalComposer editorState // prop (json
  string, state object, or a function) initialEditorState = {
  $initialEditorState } shouldBootstrap = { true } /&gt; &lt;/ LexicalComposer
  &gt; ) ; }
</p>
<h4 id="see-it-in-action">See it in action</h4>
<p>Source code: examples/react-rich-collab</p>
<h4 id="building-collaborative-plugins">Building collaborative plugins</h4>
<p>
  Lexical Playground features set of the collaboration enabled plugins that
  integrate with primary document via useCollaborationContext() hook. Notable
  mentions:
</p>
<ul>
  <li>
    CommentPlugin - features use of the separate provider and Yjs room to sync
    comments.
  </li>
  <li>
    ImageComponent - features use of the LexicalNestedComposer paired with
    CollaborationPlugin .
  </li>
  <li>
    PollOptionComponent - showcases poll implementation using clientID from Yjs
    context.
  </li>
  <li>
    StickyPlugin - features use of the LexicalNestedComposer paired with
    CollaborationPlugin as well as sticky note position real-time sync. note
    While these &#34;playground&#34; plugins aren&#39;t production ready - they
    serve as a great example of collaborative Lexical capabilities as well as
    provide a good starting point.
  </li>
</ul>
<h4 id="yjs-providers">Yjs providers</h4>
<p>
  Setting up the communication between clients, managing awareness information,
  and storing shared data for offline usage is quite a hassle. Providers manage
  all that for you and are the perfect starting point for your collaborative
  app. See Yjs Website for the list of the officially endorsed providers.
  Although it&#39;s not an exhaustive one.
</p>
<ul>
  <li>Getting started</li>
  <li>See it in action</li>
  <li>Building collaborative plugins</li>
  <li>Yjs providers</li>
</ul>
