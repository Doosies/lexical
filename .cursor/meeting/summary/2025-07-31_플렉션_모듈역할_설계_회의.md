# 📄 0. 회의 기본 정보
- **회의 ID**: MEET-20250731-002
- **자동 분류**: 개발, 아키텍처, 기술 설계
- **회의 시간**: 2025-07-31 15:20 ~ 16:43
- **한 줄 요약 제목**: 플렉션 모듈별 역할 정의 및 데이터 동기화 설계
- **회의 성격**: 상세 기술 설계 및 역할 얼라인 회의
- **원본 파일명 및 경로**: .cursor/meeting/250731_1520(flexion).txt

# 👥 1. 참석자
- 남대관, 김남훈, 김진경, 최승현, 송민형, 서준석

# 📌 2. 회의 주제 요약
이번 회의는 '플렉션(Flexion)' 프레임워크의 성공적인 개발을 위해, 각 모듈(노드, 컴포넌트, ERP 서비스)의 역할과 책임을 명확히 정의하고 개발자 간의 이해도를 맞추는 것을 핵심 목적으로 진행되었습니다. 특히, Flexion을 기존 5.0 프레임워크로부터 완전히 독립시키는 아키텍처를 수립하는 데 중점을 두었습니다. 이를 위해 외부 데이터(DMC)와 Flexion 내부 상태를 동기화하는 효율적인 방식과 데이터 키 관리 전략에 대한 심도 깊은 기술적 논의가 이루어졌습니다. 최종적으로는 각 모듈이 명확한 단일 책임 원칙을 따르도록 하고, 불필요한 의존성을 제거하여 유지보수성과 확장성이 높은 구조를 설계하는 방향으로 의견이 모아졌습니다.

# 🧷 3. 주요 키워드
모듈 역할, 독립성, 노드(Node), 컴포넌트(Component), 데이터 동기화, 데이터 키(Data Key), 노드 키(Node Key), ERP 서비스, AST(추상 구문 트리), 제너레이터(Generator), DMC/VMC

# 📎 4. 주요 내용 요약
### **Flexion 모듈별 역할 및 책임 재정의**
- **핵심 목표**: Flexion 프레임워크가 미래의 ECOUNT 버전(6.0, 7.0)에서도 독립적으로 생존할 수 있도록 모듈의 역할을 명확히 분리.
- **노드 (Node)**:
    - Flexion 코어와 UI 컴포넌트를 잇는 **'연결고리'** 역할만 수행.
    - 사용자 이벤트(예: 클릭) 발생 시, **디스패치(dispatch)**를 통해 외부로 이벤트를 전달하는 책임만 짐.
    - ECOUNT 비즈니스 로직과 완전히 무관해야 함.
- **컴포넌트 (Component)**:
    - 순수한 UI **'껍데기'** 역할. 자신이 Flexion 에디터에서 사용된다는 사실조차 몰라야 함.
    - 오직 Props로 전달받은 데이터만을 사용하여 화면을 그리는 책임만 짐. (예: `ItemViewModel` 전체가 아닌 `display_name` 등 필요한 데이터만 받음)
    - 리액트, 뷰 등 어떤 프레임워크로도 교체 가능하도록 설계.
- **ERP 서비스 (구 External Model Manager)**:
    - Flexion과 기존 5.0 프레임워크(DMC/VMC) 사이의 **'브릿지(Bridge)'** 역할.
    - 외부 데이터 모델(DMC)의 변경을 **구독(subscribe)**하여, 변경된 데이터를 Flexion 내부 노드에 전달하고 상태를 동기화하는 모든 책임을 짐.

### **데이터 동기화 및 Key 관리 전략 심층 논의**
- **문제점**: 그리드처럼 수만 개의 셀이 있을 때, 각 셀이 개별적으로 DMC의 `subscribe`를 사용하면 수만 개의 리스너가 생성되어 심각한 성능 저하 발생.
- **해결책**:
    - ERP 서비스가 DMC 모델 당 **단 하나의 `subscribe`만 등록**하여 변경을 감지.
    - **데이터 키(Data Key)를 규칙 기반(Rule-based)**으로 생성하여, 랜덤 값이 아닌 예측 가능한 값으로 관리. (예: `model_id` + `index` + `property_id`)
    - 이를 통해 데이터 변경 시, 전체 노드를 탐색할 필요 없이 **데이터 키만으로 업데이트가 필요한 노드를 즉시 찾아낼 수 있음**.
    - 데이터 키 생성 로직(Key Generator)은 외부에서 주입받는 방식으로 설계하여 유연성 확보.

### **AST(추상 구문 트리) 생성 파이프라인 설계**
- **목표**: 기존 5.0의 복잡한 뷰 모델(View Model)과 제너레이터(Generator) 구조를 단순화하고 Flexion에 최적화된 AST를 생성.
- **논의된 구조 (Pre-render Pipeline)**:
    - **AST Builder**: 외부 메타 정보(`i-setup` 또는 5.6 템플릿)를 기반으로 1차적인 Flexion AST를 생성.
    - **Layout Composition**: 생성된 AST를 기반으로 페이지 레이아웃(인쇄, 현황 등)에 맞게 AST를 재구성하고 최적화. (예: 페이지 당 행 수 계산, 합계/소계 노드 추가 등)
- **결정**: 5.0의 뷰 모델 제너레이터는 점진적으로 폐기하고, 모든 UI 구조 생성 로직을 Flexion의 AST 파이프라인으로 통합하는 방향으로 결정.

# 📝 5. 액션 아이템 (해야 할 일)
- **담당자: 코어/ERP 서비스 파트 (조현오, 최승현)**
  - **할일**: ERP 서비스의 3가지 핵심 인터페이스(디스패치, 데이터 싱크, 외부 모듈 참조)를 구체적으로 설계하고 공유.
  - **마감기한**: 다음 회의 전까지 (빠른 시일 내)

- **담당자: 컴포넌트 파트 (송민형)**
  - **할일**: 노드와 컴포넌트가 주고받을 State의 인터페이스를 구체적으로 설계. (예: `setState`를 개별로 둘지, 객체로 받을지 등)
  - **마감기한**: 다음 회의 전까지 (코어 파트와 협의)

- **담당자: 그리드 파트 (김진경, 서준석)**
  - **할일**: 헤더/바디/푸터 노드 구현 및 동적 플러그인 로딩을 위한 리졸버(Resolver) 설계를 계속 진행.
  - **마감기한**: 다음 주 월요일 (진행 상황 공유)

- **담당자: 전체 팀**
  - **할일**: 각자 맡은 모듈의 오너십을 가지고, 독립적으로 개발/테스트/운영이 가능한 환경을 구성할 것.
  - **마감기한**: 지속