# Lexical과 React 연동 심층 분석

이 문서는 `@lexical/react` 패키지를 사용하여 Lexical을 React 애플리케이션에 통합하는 방법과 주요 패턴, 그리고 고급 활용법에 대해 심층적으로 분석합니다.

## 1. 핵심 컴포넌트와 훅

(이 섹션은 향후 관련 문서를 분석하며 채워나갈 예정입니다.)

## 2. 주요 사용 패턴 및 FAQ

(이 섹션은 향후 관련 문서를 분석하며 채워나갈 예정입니다.)

## 3. 고급 훅 활용

### 3.1. HistoryPlugin과 Undo 병합(Coalescing) 정책

`@lexical/react`의 `useHistory` 훅과 `@lexical/history` 패키지는 단순한 Undo/Redo 스택 관리를 넘어, 사용자 경험(UX)을 향상시키기 위한 정교한 **Undo 병합(Coalescing)** 정책을 구현하고 있습니다.

- **Undo 병합이란?**: 사용자가 연속적으로 타이핑할 때, 각 문자 하나하나가 별개의 Undo 기록으로 남는 것이 아니라, 하나의 의미 있는 덩어리(e.g., 단어, 문장)로 묶여 한 번의 Undo로 되돌려지는 알고리즘입니다.

- **연속적인 타이핑으로 간주되는 행위**:
  - 문자 입력
  - 백스페이스(Backspace)로 삭제
  - Delete 키로 삭제

- **연속성을 깨는(병합을 중단하는) 행위**:
  - **시간 초과**: 일정 시간(보통 1~5초) 이상 입력이 없을 경우.
  - **명시적 줄바꿈**: `Enter` 키 입력. (단, `Shift+Enter`는 연속성을 유지합니다.)
  - **선택 영역 변경**: 화살표 키 이동, 단어/문단 선택 등 명시적인 선택 변경.
  - **포커스 잃음**: 다른 창이나 UI 요소로 포커스가 이동할 경우.
  - **특수 입력**: CJK 문자 조합, 자동 완성, 맞춤법 교정, 복사/붙여넣기 등 일반적인 타이핑이 아닌 텍스트 변환.

이러한 정책을 통해 사용자는 불필요한 Undo 단계를 거치지 않고, 자신의 의도에 맞는 단위로 작업을 되돌릴 수 있는 직관적인 경험을 하게 됩니다. 