# `year_select.tsx`의 onValidate 역할 분석 보고서

## 1. 분석 요청 배경
`year_select.tsx` 컴포넌트에는 `onChange` prop이 이미 존재함에도 불구하고, `onValidate` prop이 별도로 필요한 이유에 대한 아키텍처적 분석을 요청받음.

## 2. 결론
`onValidate`는 `onChange`가 처리하는 **'선택'** 이벤트와는 다른, 다음과 같은 두 가지 핵심 시나리오에서 값의 유효성을 보장하기 위한 필수적인 장치이다.

1.  **사용자의 직접 입력(Manual Input) 값 검증**: `year_select`는 검색 가능한 Select 컴포넌트로, 사용자가 드롭다운 목록에 없는 임의의 값을 직접 타이핑할 수 있다. `onValidate`는 이 신뢰할 수 없는 "날 것(raw)"의 데이터가 애플리케이션의 비즈니스 규칙(예: 회계 마감 년도 확인)에 부합하는지 검증하는 최종 관문 역할을 한다. 이 검증은 주로 사용자가 입력을 마치고 포커스를 잃는 시점(`onBlur`)에 `isYearCondition` 함수를 통해 트리거된다.
2.  **외부로부터의 프로그래밍적 값 변경(Programmatic Change) 검증**: 부모 컴포넌트의 상태 변화 등에 의해 `year_select`의 `value` prop이 외부에서 변경될 경우, `useEffect` 훅이 이 변경을 감지하여 `isYearCondition` 함수를 실행한다. 이를 통해 외부 요인으로 변경된 값 또한 시스템의 비즈니스 규칙을 준수하는지 일관성 있게 검증할 수 있다.

## 3. `onChange`와 `onValidate`의 역할 구분

| 구분 | `onChange` | `onValidate` |
| :--- | :--- | :--- |
| **주요 역할** | 사용자가 목록에서 특정 항목을 **선택**했을 때의 이벤트 처리 | 컴포넌트가 다루는 값의 **최종 유효성**을 보장 |
| **트리거 시점** | 드롭다운 아이템 클릭 또는 키보드 선택 시 | 1. 수동 입력 후 포커스를 잃었을 때<br/>2. Prop으로 받은 값이 외부에서 변경되었을 때 |
| **관점** | "어떤 항목이 **선택되었는가**?" | "이 값이 시스템에서 **유효한 값인가**?" |
| **처리 로직** | 선택된 값을 상위로 전달하는 비교적 단순한 로직 | API 호출, 전역 상태 조회 등 복잡하고 비동기적인 비즈니스 로직 포함 가능 |

## 4. 아키텍처적 의의
`onValidate` prop을 분리함으로써 `year_select.tsx` 컴포넌트는 다음과 같은 이점을 얻는다.

-   **관심사의 분리(SoC)**: 컴포넌트는 UI 표현과 최소한의 자체 규칙(4자리 숫자)에만 집중하고, 복잡한 비즈니스 규칙의 책임은 상위 레이어로 위임할 수 있다.
-   **재사용성 및 유연성**: 비즈니스 로직이 컴포넌트 내부에 하드코딩되어 있지 않으므로, 어떤 애플리케이션 컨텍스트에서도 `year_select` 컴포넌트를 재사용할 수 있으며, 각기 다른 유효성 검사 로직을 외부에서 유연하게 주입할 수 있다.

따라서, `onValidate`는 단순한 중복 기능이 아니라, 재사용 가능하고 견고한 컴포넌트를 만들기 위한 핵심적인 설계 패턴이다.
