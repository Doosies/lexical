---
description: flexionì˜ boilerplate codeë¥¼ ìƒì„±í•  ë•Œ ë°˜ë“œì‹œ ì°¸ì¡°í•´ì•¼í•˜ëŠ” ê·œì¹™
---

# Flexion Boilerplate Code Generation Rule (v2.5 - Linearized)

## ëª©ì°¨

-   [Step 1: ì…ë ¥ ë¶„ì„ (Input Analysis)](#step-1-ì…ë ¥-ë¶„ì„-input-analysis)
-   [Step 2: íŒŒì¼ ê²½ë¡œ ë° ìƒíƒœ ê²°ì • (File Path & Status Resolution)](#step-2-íŒŒì¼-ê²½ë¡œ-ë°-ìƒíƒœ-ê²°ì •-file-path--status-resolution)
-   [Step 3: íŒŒì¼ ë‚´ìš© ìƒì„± (File Content Generation)](#step-3-íŒŒì¼-ë‚´ìš©-ìƒì„±-file-content-generation)
    -   [3.1. Import ê·œì¹™](#31-import-ê·œì¹™)
    -   [3.2. í•µì‹¬ ë¡œì§ ìƒì„± (Node, Types)](#32-í•µì‹¬-ë¡œì§-ìƒì„±-node-types)
        -   [3.2.1. `Flexion{DataType}Node.tsx`](#321-flexiondatatypenodetsx)
        -   [3.2.2. `types/Flexion{DataType}NodeProps.ts`](#322-typesflexiondatatypenodepropsts)
        -   [3.2.3. `types/Flexion{DataType}NodeState.ts`](#323-typesflexiondatatypenodestatets)
    -   [3.3. ìƒí˜¸ì‘ìš© ë¡œì§ ìƒì„± (Commands, Plugins)](#33-ìƒí˜¸ì‘ìš©-ë¡œì§-ìƒì„±-commands-plugins)
        -   [3.3.1. `commands/{view_type}/{COMMAND_NAME}.ts`](#331-commandsview_typecommand_namets)
        -   [3.3.2. `plugins/{view_type}/Flexion{DataType}{ViewType}Plugin.tsx`](#332-pluginsview_typeflexiondatatypetypetypetsx)
    -   [3.4. ë·°(View) ìƒì„±](#34-ë·°view-ìƒì„±)
        -   [3.4.1. `views/Base{DataType}View.tsx`](#341-viewsbasedatatypetypetsx)
        -   [3.4.2. `views/{DataType}ViewFactory.ts`](#342-viewsdatatypeviewfactoryts)
        -   [3.4.3. `views/{view_type}/{ViewType}{DataType}View.tsx`](#343-viewsview_typeviewtypedatatypetypetsx)
    -   [3.5. ëª¨ë“ˆ ì—°ê²° (`index.ts`)](#35-ëª¨ë“ˆ-ì—°ê²°-indexts)
-   [Step 4: íŒŒì¼ ì‹œìŠ¤í…œ ì ìš© (File System Application)](#step-4-íŒŒì¼-ì‹œìŠ¤í…œ-ì ìš©-file-system-application)
    -   [4.1. íŒŒì¼ ë³‘í•© ë° ì—…ë°ì´íŠ¸ ê·œì¹™](#41-íŒŒì¼-ë³‘í•©-ë°-ì—…ë°ì´íŠ¸-ê·œì¹™)
-   [Step 5: ìµœì¢… ê²€ì¦ (Final Verification)](#step-5-ìµœì¢…-ê²€ì¦-final-verification)
    -   [5.1. ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸](#51-ê²€ì¦-ì²´í¬ë¦¬ìŠ¤íŠ¸)

<br>

> **ì ˆëŒ€ ì›ì¹™ (Golden Rules)**
>
> 1.  **ì„ í˜•ì  ë‹¨ê³„ ìˆ˜í–‰**: LLMì€ ë°˜ë“œì‹œ Step 1ë¶€í„° Step 5ê¹Œì§€ ìˆœì„œëŒ€ë¡œ ê° ë‹¨ê³„ë¥¼ ì™„ë²½í•˜ê²Œ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì´ì „ ë‹¨ê³„ê°€ ì™„ë£Œë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤.
> 2.  **ëª…í™•í•œ ì…ì¶œë ¥**: ê° ë‹¨ê³„ëŠ” ì´ì „ ë‹¨ê³„ì˜ ê²°ê³¼ë¬¼ì„ ì…ë ¥ìœ¼ë¡œ ë°›ìœ¼ë©°, ë‹¤ìŒ ë‹¨ê³„ë¡œ ì „ë‹¬í•  ëª…í™•í•œ ê²°ê³¼ë¬¼ì„ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤.
> 3.  **ê²€ì¦**: Step 5ì˜ ìµœì¢… ê²€ì¦ ë‹¨ê³„ë¥¼ í†µí•´ ìƒì„±ëœ ì½”ë“œì˜ ì •í•©ì„±ì„ ë³´ì¥í•´ì•¼ í•©ë‹ˆë‹¤.

<br>

## LLMì„ ìœ„í•œ ê°€ì´ë“œ

> **1. ë‹¹ì‹ ì˜ ì—­í• **: ë‹¹ì‹ ì€ **Flexion Boilerplate ìƒì„± ì „ë¬¸ê°€**ì…ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì„ë¬´ëŠ” ì´ ê·œì¹™ ë¬¸ì„œë¥¼ ì™„ë²½í•˜ê²Œ ì´í•´í•˜ê³ , ì•„ë˜ì— ì •ì˜ëœ 5ë‹¨ê³„ì˜ ì„ í˜•ì  í”„ë¡œì„¸ìŠ¤ë¥¼ ì •í™•í•˜ê²Œ ë”°ë¼ ì½”ë“œë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
> **2. ë‹¹ì‹ ì˜ ëª©í‘œ**: í…œí”Œë¦¿ íŒŒì¼ë“¤ì„ ì…ë ¥ë°›ì•„, ê° ë‹¨ê³„ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ì—¬ ìµœì¢…ì ìœ¼ë¡œ ìœ íš¨í•œ ì†ŒìŠ¤ ì½”ë“œ íŒŒì¼ë“¤ì„ ìƒì„±, ìˆ˜ì •, ë˜ëŠ” ì‚­ì œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

---

## Step 1: ì…ë ¥ ë¶„ì„ ë° JSON ì„¤ê³„ë„ ìƒì„± (Input Analysis & JSON Blueprint Generation)

**[ì—­í• ]**: ì œê³µëœ í…œí”Œë¦¿ íŒŒì¼(`types.ts`, `_*ts`)ì˜ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬, ì½”ë“œ ìƒì„±ì— í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ì¶”ì¶œí•˜ê³  **êµ¬ì¡°í™”ëœ ë‹¨ì¼ JSON ê°ì²´(ì„¤ê³„ë„)**ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ ë‹¨ê³„ì˜ ìœ ì¼í•œ ì‚°ì¶œë¬¼ì€ ì´ JSON ê°ì²´ì…ë‹ˆë‹¤.

1.  **ì •ë³´ ì¶”ì¶œ**:
    -   `packages/flexion-templates/src/{data_type}/types.ts`ì—ì„œ `NodeData`, `NodeState`, `NodeProps` ì¸í„°í˜ì´ìŠ¤ì˜ **ë‚´ìš©(body)**ì„ ë¬¸ìì—´ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤.
    -   ê° `packages/flexion-templates/src/{data_type}/{config}.ts` íŒŒì¼ì—ì„œ `data_type`, `view_type`, `commands` ë°°ì—´(ì»¤ë§¨ë“œëª…, payload íƒ€ì…, ìš°ì„ ìˆœìœ„)ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
2.  **JSON ì„¤ê³„ë„ ìƒì„±**: ì¶”ì¶œëœ ëª¨ë“  ì •ë³´ë¥¼ ì•„ë˜ êµ¬ì¡°ì— ë”°ë¼ ë‹¨ì¼ JSON ê°ì²´ë¡œ í†µí•©í•©ë‹ˆë‹¤. ì´ ê°ì²´ëŠ” í›„ì† ë‹¨ê³„ì˜ ìœ ì¼í•œ ì •ë³´ ì†ŒìŠ¤ê°€ ë©ë‹ˆë‹¤.

    -   **JSON ì¶œë ¥ ì˜ˆì‹œ**:
        ```json
        {
            "data_type": "Sample",
            "types": {
                "NodeData": "name: string; value: number;",
                "NodeState": "view_type: EN_VIEW_TYPE;  is_editable: boolean;",
                "NodeProps": "custom_prop: () => void;"
            },
            "view_configs": [
                {
                    "view_type": "default",
                    "commands": [
                        {
                            "name": "A_COMMAND",
                            "payload_type": "BaseNodePayload",
                            "priority": "NORMAL"
                        }
                    ]
                },
                {
                    "view_type": "anchor",
                    "commands": [
                        {
                            "name": "B_COMMAND",
                            "payload_type": "ValuePayload<string>",
                            "priority": "HIGH"
                        }
                    ]
                }
            ]
        }
        ```

3.  **ì„¤ê³„ë„ ë³´ê³ **: ìƒì„±ëœ JSON ì„¤ê³„ë„ë¥¼ ì‚¬ìš©ìì—ê²Œ `json ... ` í˜•ì‹ìœ¼ë¡œ ì¶œë ¥í•˜ì—¬ ë¶„ì„ ê²°ê³¼ë¥¼ ë³´ê³ í•©ë‹ˆë‹¤.
4.  **ê²°ê³¼ë¬¼**: ìƒì„±ëœ **JSON ì„¤ê³„ë„**. ì´ ê°ì²´ëŠ” Step 2ì˜ ì…ë ¥ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

## Step 2: íŒŒì¼ ê²½ë¡œ ë° ìƒíƒœ ê²°ì • (File Path & Status Resolution)

**[ì—­í• ]**: **ì˜¤ì§ Step 1ì˜ JSON ì„¤ê³„ë„**ë§Œì„ ì…ë ¥ìœ¼ë¡œ ë°›ì•„, ìƒì„±/ìˆ˜ì •/ì‚­ì œê°€ í•„ìš”í•œ ëª¨ë“  íŒŒì¼ì˜ ì ˆëŒ€ ê²½ë¡œì™€ ìƒíƒœë¥¼ ê²°ì •í•˜ì—¬ **"íŒŒì¼ ì‘ì—… ëª©ë¡"**ì„ ìƒì„±í•©ë‹ˆë‹¤.

1.  **íŒŒì¼ ê²½ë¡œ í™•ì •**: Step 1ì˜ JSON ì„¤ê³„ë„ì™€ **íŒŒì¼ ì˜í–¥ ë¶„ì„í‘œ**ë¥¼ ì°¸ì¡°í•˜ì—¬, ì˜í–¥ì„ ë°›ëŠ” ëª¨ë“  íŒŒì¼ì˜ ì „ì²´ ê²½ë¡œ ëª©ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤.
    -   **íŒŒì¼ ì˜í–¥ ë¶„ì„í‘œ (File Influence Map)**
        | JSON Key | ëª©ì  | ì˜í–¥ì„ ë°›ëŠ” ìƒì„± íŒŒì¼ |
        |---|---|---|
        | `view_configs` | `view_type`ë³„ ìƒí˜¸ì‘ìš© ë° UI ì •ì˜ | `commands/*`, `plugins/*`, `views/*` |
        | `types` | í•µì‹¬ ë°ì´í„° êµ¬ì¡° ë° ìƒíƒœ ì •ì˜ | `types/*` |
        | ëª¨ë“  ë³€ê²½ | ëª¨ë“ˆ ì—°ê²°ì„± ë³´ì¥ | ê° ê³„ì¸µì˜ `index.ts` |
        | ìµœì´ˆ ìƒì„± ì‹œ | ê¸°ë³¸ êµ¬ì¡° í˜•ì„± | `Flexion{DataType}Node.tsx`, `views/Base{DataType}View.tsx` |
2.  **íŒŒì¼ ìƒíƒœ ê²°ì •**: í™•ì •ëœ ê° íŒŒì¼ ê²½ë¡œì— ëŒ€í•´ íŒŒì¼ ì‹œìŠ¤í…œì„ í™•ì¸í•˜ì—¬ `ğŸŸ¢NEW`, `âœï¸UPDATE`, `âŒDELETE`, `âšªUNCHANGED` ìƒíƒœë¥¼ ê²°ì •í•©ë‹ˆë‹¤.

> **[UPDATE / UNCHANGED ìƒíƒœ ê²°ì • ê°€ì´ë“œ]**
>
> LLMì€ íŒŒì¼ì˜ ìƒíƒœë¥¼ ê²°ì •í•  ë•Œ ì•„ë˜ ê¸°ì¤€ì„ ì—„ê²©í•˜ê²Œ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤. "ê¸°ëŠ¥ì  ë³€ê²½" ìœ ë¬´ê°€ ê°€ì¥ ì¤‘ìš”í•œ íŒë‹¨ ê¸°ì¤€ì…ë‹ˆë‹¤.
>
> -   **`âœï¸UPDATE` (ê¸°ëŠ¥ì  ë³€ê²½ì´ ìˆëŠ” ê²½ìš°)**
>     -   ì¸í„°í˜ì´ìŠ¤ ìƒì† êµ¬ì¡° ë³€ê²½ (`extends` ì¶”ê°€/ì‚­ì œ/ë³€ê²½)
>     -   í•¨ìˆ˜ ë˜ëŠ” ë©”ì„œë“œì˜ ì‹œê·¸ë‹ˆì²˜(ì¸ì, ë°˜í™˜ íƒ€ì…) ë³€ê²½
>     -   ìƒˆë¡œìš´ ë¡œì§(ë©”ì„œë“œ, í•¨ìˆ˜, ë³€ìˆ˜, `case` ë¬¸ ë“±) ì¶”ê°€ ë˜ëŠ” ê¸°ì¡´ ë¡œì§ ì‚­ì œ
>     -   `export` ëª©ë¡ì— ìƒˆë¡œìš´ ì•„ì´í…œì´ ì¶”ê°€ë˜ê±°ë‚˜ ì‚­ì œë˜ëŠ” ê²½ìš°
> -   **`âšªUNCHANGED` (ê¸°ëŠ¥ì  ë³€ê²½ì´ ì—†ëŠ” ê²½ìš°)**
>     -   `import` êµ¬ë¬¸ì˜ ìˆœì„œ, ê·¸ë£¹í™” ë°©ì‹ ë˜ëŠ” ê²½ë¡œë§Œ ë³€ê²½ëœ ê²½ìš° (ë‹¨, ë³€ê²½ ì „í›„ì˜ ê²½ë¡œê°€ ê¸°ëŠ¥ì ìœ¼ë¡œ ë™ì¼í•œ ëª¨ë“ˆì„ ê°€ë¦¬ì¼œì•¼ í•¨. ì˜ˆ: ìƒëŒ€ ê²½ë¡œ â†” ì ˆëŒ€ ê²½ë¡œ/ë³„ì¹­)
>     -   ì£¼ì„ì˜ ë‚´ìš©, ìœ„ì¹˜, ì¶”ê°€ ë˜ëŠ” ì‚­ì œ
>     -   ë‹¨ìˆœ ì¤„ë°”ê¿ˆ, ê³µë°± ë“± ì½”ë“œ í¬ë§·íŒ… ìŠ¤íƒ€ì¼ ë³€ê²½
>
> **íŒë‹¨ì´ ëª¨í˜¸í•  ê²½ìš°**:
> ìœ„ ê¸°ì¤€ì— ë”°ë¼ ê¸°ëŠ¥ì  ë³€ê²½ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ê¸° ëª¨í˜¸í•œ ê²½ìš°, LLMì€ ìì˜ì ìœ¼ë¡œ íŒë‹¨í•˜ì§€ ì•Šê³  **ë°˜ë“œì‹œ ì‚¬ìš©ìì—ê²Œ ì§ˆë¬¸í•˜ì—¬ í™•ì¸**ì„ ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.
>
> ì´ ê·œì¹™ì€ ë¶ˆí•„ìš”í•œ ì½”ë“œ ë³€ê²½(churn)ì„ ë°©ì§€í•˜ê³ , ì‚¬ìš©ìê°€ ì§ì ‘ ìˆ˜ì •í•œ ì½”ë“œ ìŠ¤íƒ€ì¼ì„ ì¡´ì¤‘í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.

3.  **ë³€ê²½ ì‚¬í•­ ì‹œê°í™” ë° ë³´ê³ **: ê²°ì •ëœ íŒŒì¼ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ, ì•„ë˜ì™€ ê°™ì€ íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ë³´ê³ í•©ë‹ˆë‹¤. ì´ ì‹œê°í™” ìë£Œë¥¼ í†µí•´ ì‚¬ìš©ìëŠ” ë³€ê²½ë  ë‚´ìš©ì„ ëª…í™•íˆ ì¸ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```markdown
/nodes/{data_type}/
|-- commands/
| |-- {view_type}/
| | |-- {COMMAND_NAME}.ts (ğŸŸ¢NEW)
| | â””â”€- index.ts (âœï¸UPDATE)
| â””â”€- index.ts
|-- plugins/
| |-- {view_type}/
| | |-- Flexion{DataType}{ViewType}Plugin.tsx (ğŸŸ¢NEW)
| | |-- NoMoreNeedPlugin.tsx (âŒDELETE)
| | |-- PrevPlugin.tsx (âšªUNCHANGED)
| | â””â”€- index.ts (âœï¸UPDATE)
| â””â”€- index.ts
|-- types/
| |-- Flexion{DataType}NodeProps.ts(âœï¸UPDATE)
| |-- Flexion{DataType}NodeState.ts(âšªUNCHANGED)
| â””â”€- index.ts (âšªUNCHANGED)
|-- views/
| |-- {view_type}/
| | |-- {ViewType}{DataType}View.tsx(âœï¸UPDATE)
| | â””â”€- index.ts (âšªUNCHANGED)
| |-- Base{DataType}View.tsx(âšªUNCHANGED)
| |-- {DataType}ViewFactory.ts(âœï¸UPDATE)
| â””â”€- index.ts (âšªUNCHANGED)
|-- Flexion{DataType}Node.tsx (âšªUNCHANGED)
â””â”€- index.ts (âšªUNCHANGED)
```

4.  **ê²°ê³¼ë¬¼**: `[{path: '...', status: 'NEW'}, {path: '...', status: 'UPDATE'}, ...]` í˜•íƒœì˜ **"íŒŒì¼ ì‘ì—… ëª©ë¡"**ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ ëª©ë¡ì€ Step 3ì˜ ì…ë ¥ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

## Step 3: íŒŒì¼ ë‚´ìš© ìƒì„± (File Content Generation)

**[ì—­í• ]**: Step 2ì˜ **"íŒŒì¼ ì‘ì—… ëª©ë¡"**ê³¼ Step 1ì˜ **"JSON ì„¤ê³„ë„"**ë¥¼ ì°¸ì¡°í•˜ì—¬, ê° íŒŒì¼ì— ë“¤ì–´ê°ˆ ì „ì²´ ë‚´ìš©ì„ ë©”ëª¨ë¦¬ìƒì—ì„œ ìƒì„±í•©ë‹ˆë‹¤.

### 3.1. Import ê·œì¹™

LLMì€ ì•„ë˜ì— ì •ì˜ëœ **ìš°ì„ ìˆœìœ„**ì— ë”°ë¼ Import ê²½ë¡œë¥¼ ê²°ì •í•´ì•¼ í•©ë‹ˆë‹¤.

#### ìš°ì„ ìˆœìœ„ 1: ê³µìš© ëª¨ë“ˆ ìƒëŒ€ ê²½ë¡œ ê³„ì‚°

-   ì•„ë˜ 'ê³µìš© ëª¨ë“ˆ' í…Œì´ë¸”ì— ì •ì˜ëœ í•­ëª©ì„ importí•  ê²½ìš°, **ë°˜ë“œì‹œ** í˜„ì¬ ìƒì„± ì¤‘ì¸ íŒŒì¼ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìƒëŒ€ ê²½ë¡œë¥¼ ë™ì ìœ¼ë¡œ ê³„ì‚°í•´ì•¼ í•©ë‹ˆë‹¤.
-   **(ì¤‘ìš”) ê¹Šì€ ê²½ë¡œ import ê¸ˆì§€ (No Deep Imports)**: ê³µìš© ëª¨ë“ˆ(`base`, `common` ë“±)ì—ì„œ importí•  ë•ŒëŠ” `../base/types/FlexionNodeProps`ì™€ ê°™ì´ 2ë‹¨ê³„ ì´ìƒ ê¹Šì€ íŒŒì¼ ê²½ë¡œë¡œ ì§ì ‘ ì ‘ê·¼í•´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤. ë°˜ë“œì‹œ ëª¨ë“ˆì˜ ì§„ì…ì (ì˜ˆ: `../../base, ../common, ../../../common`)ì„ í†µí•´ import í•´ì•¼ í•©ë‹ˆë‹¤.

| ëª¨ë“ˆ ê²½ë¡œ                                   | ì£¼ìš” Export í•­ëª©                                                                                                 | ì„¤ëª…                                          |
| ------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- | --------------------------------------------- |
| `packages/30.flexion-node/src/nodes/base`   | `BaseNodeView`, `INodeView`, `FlexionNodeEventHandler`, `FlexionNodeProps`, `FlexionNodeState`, `IDataTypeState` | ëª¨ë“  ë…¸ë“œ Viewì™€ íƒ€ì…ì˜ ê¸°ë°˜ì´ ë˜ëŠ” ê³µìš© ëª¨ë“ˆ |
| `packages/30.flexion-node/src/nodes/common` | `BaseNodePayload`, `ValuePayload`                                                                                | ëª¨ë“  ë…¸ë“œì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” Payload íƒ€ì…  |

#### ìš°ì„ ìˆœìœ„ 2: í•µì‹¬ ëª¨ë“ˆ ì ˆëŒ€ ê²½ë¡œ (Source of Truth)

-   ì•„ë˜ í…Œì´ë¸”ì˜ ëª¨ë“ˆì€ ê²½ë¡œ ê³„ì‚° ì—†ì´ ëª…ì‹œëœ ê²½ë¡œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

| ëª¨ë“ˆ/í´ë˜ìŠ¤/í•¨ìˆ˜                                              | ê²½ë¡œ (Path)                             | ì„¤ëª…                                   |
| ------------------------------------------------------------- | --------------------------------------- | -------------------------------------- |
| `FlexionDecoratorNode`, `createCommand`, `COMMAND_PRIORITY_*` | `import { ... } from 'flexion';`        | Nodeì˜ í•µì‹¬ ê¸°ë°˜ í´ë˜ìŠ¤ ë° ì»¤ë§¨ë“œ ê´€ë ¨ |
| `useFlexionComposerContext`                                   | `import { ... } from 'FlexionNode';`    | Flexion ì»¨í…ìŠ¤íŠ¸ ì ‘ê·¼ í›…               |
| `mergeRegister`                                               | `import { ... } from '@flexion/utils';` | ì—¬ëŸ¬ ì»¤ë§¨ë“œ ë¦¬ìŠ¤ë„ˆë¥¼ ë³‘í•©í•˜ëŠ” ìœ í‹¸     |

#### ìš°ì„ ìˆœìœ„ 3: ì¼ë°˜ ë¡œì§ ë° ê·¸ë£¹í™”

-   ìœ„ ë‘ ê²½ìš°ì— í•´ë‹¹í•˜ì§€ ì•ŠëŠ” ê²½ìš°, ë™ì¼ `{data_type}` ëª¨ë“ˆ ë‚´ì—ì„œëŠ” ì§§ì€ ìƒëŒ€ ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ê³ , ê·¸ ì™¸ì—ëŠ” `tsconfig` ë³„ì¹­ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
-   ëª¨ë“  import êµ¬ë¬¸ì€ 1. ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬, 2. ëª¨ë…¸ë ˆí¬ ë¼ì´ë¸ŒëŸ¬ë¦¬, 3. ë‚´ë¶€ ëª¨ë“ˆ ìˆœìœ¼ë¡œ ê·¸ë£¹í™”í•˜ê³  ì •ë ¬í•©ë‹ˆë‹¤.

### 3.2. í•µì‹¬ ë¡œì§ ìƒì„± (Node, Types)

#### 3.2.1. `Flexion{DataType}Node.tsx`

-   **ê·œì¹™**:
    1. `'flexion'` íŒ¨í‚¤ì§€ì—ì„œ `FlexionDecoratorNode`ë¥¼ `import`í•˜ì—¬ ìƒì†ë°›ìŠµë‹ˆë‹¤.
    2. ì•„ë˜ ë©”ì„œë“œë“¤ë§Œ ì½”ë“œ í…œí”Œë¦¿ê³¼ ê°™ì´ ì •í™•í•˜ê²Œ êµ¬í˜„í•©ë‹ˆë‹¤.
        - `$getConfig()`: `type` ì†ì„±ì„ `{data_type}`ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.
        - `createDOM()`: ê¸°ë³¸ `HTMLElement`ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.
        - `decorate()`: `{DataType}ViewFactory`ë¥¼ ì‚¬ìš©í•˜ì—¬ View ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•˜ê³  ë°˜í™˜í•©ë‹ˆë‹¤.
    3. `constructor`ëŠ” ì¶”ê°€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
-   **ì½”ë“œ í…œí”Œë¦¿**:

        ```typescript

    import { EditorConfig, FlexionDecoratorNode, IFlexionDecoratorNodeConfig } from 'flexion';
    import React from 'react';

    import { Flexion{DataType}NodeData, Flexion{DataType}NodeState } from './types';
    import { create{DataType}View } from './views';

    export class Flexion{DataType}Node extends FlexionDecoratorNode<
    Flexion{DataType}NodeData,
    Flexion{DataType}NodeState,
    React.ReactElement > {
    protected $getConfig(): IFlexionDecoratorNodeConfig | null {
    return {type: '{data_type}'};
    }

            createDOM(config: EditorConfig): HTMLElement {
                return document.createElement('span');
            }

            decorate(): JSX.Element {
                const state = this.$getState();
                const view_type = state?.view_type;

            const view = create{DataType}View(this, view_type);
            return view.getComponent();
            }
        }
        ```

#### 3.2.2. `types/Flexion{DataType}NodeProps.ts`

-   **ê·œì¹™**: `packages/flexion-templates/src/{data_type}/types.ts` íŒŒì¼ì—ì„œ `NodeProps` ì¸í„°í˜ì´ìŠ¤ì˜ ì •ì˜ë¥¼ ì¶”ì¶œí•˜ì—¬ ì•„ë˜ í…œí”Œë¦¿ì— í†µí•©í•©ë‹ˆë‹¤.
-   **ì½”ë“œ í…œí”Œë¦¿**:

        ```typescript

    import {FlexionNodeProps, FlexionNodeState} from 'FlexionNode';

    export interface Flexion{DataType}NodeProps<
    TDataType,
    TState extends FlexionNodeState, > extends FlexionNodeProps<TDataType, TState> {
    // ... (í…œí”Œë¦¿ì˜ NodeProps ë‚´ìš©)
    }

    ```

    ```

#### 3.2.3. `types/Flexion{DataType}NodeState.ts`

-   **ê·œì¹™**: `packages/flexion-templates/src/{data_type}/types.ts` íŒŒì¼ì—ì„œ `NodeData`ì™€ `NodeState` ì¸í„°í˜ì´ìŠ¤ì˜ ì •ì˜ë¥¼ ì¶”ì¶œí•˜ì—¬ ì•„ë˜ í…œí”Œë¦¿ì— í†µí•©í•©ë‹ˆë‹¤.
-   **ì½”ë“œ í…œí”Œë¦¿**:

        ```typescript

    import {FlexionNodeState} from 'FlexionNode';

    export type Flexion{DataType}NodeData = {
    // ... (í…œí”Œë¦¿ì˜ NodeData ë‚´ìš©)
    };

    export interface Flexion{DataType}NodeState extends FlexionNodeState {
    // ... (í…œí”Œë¦¿ì˜ NodeState ë‚´ìš©)
    }

    ```

    ```

### 3.3. ìƒí˜¸ì‘ìš© ë¡œì§ ìƒì„± (Commands, Plugins)

#### 3.3.1. `commands/{view_type}/{COMMAND_NAME}.ts`

    - **ê·œì¹™**:
    1.  `createCommand`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¤ë§¨ë“œë¥¼ ìƒì„±í•˜ê³  `export` í•©ë‹ˆë‹¤.
    2.  í…œí”Œë¦¿ì˜ `payload_type`ì— ë”°ë¼ `ValuePayload` ë˜ëŠ” `BaseNodePayload`ë¥¼ `import` í•©ë‹ˆë‹¤.

-   **ì½”ë“œ í…œí”Œë¦¿**:

    ```typescript
    import { createCommand, ValuePayload, BaseNodePayload } from 'flexion';

    export type {CommandNamePascal}Payload = {PayloadType}; // ValuePayload or BaseNodePayload

    export const {COMMAND_NAME}_COMMAND =
        createCommand<{CommandNamePascal}Payload>('{COMMAND_NAME}_COMMAND');
    ```

#### 3.3.2. `plugins/{view_type}/Flexion{DataType}{ViewType}Plugin.tsx`

    - **ê·œì¹™**:
        1. `memo`ë¡œ ê°ì‹¸ì§„ React ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.
    2. `useEffect` í›… ë‚´ì—ì„œ `flexion.registerCommand()`ë¥¼ í˜¸ì¶œí•˜ì—¬ í…œí”Œë¦¿ì— ì •ì˜ëœ ëª¨ë“  ì»¤ë§¨ë“œë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.
    3. ì½œë°± í•¸ë“¤ëŸ¬ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `return false;`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    4. ì»¤ë§¨ë“œ ìš°ì„ ìˆœìœ„ëŠ” í…œí”Œë¦¿ì— ëª…ì‹œëœ `priority` ê°’ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

-   **ì½”ë“œ í…œí”Œë¦¿**:

    ```typescript
    import { memo, useEffect } from 'react';
    import { useFlexionComposerContext } from 'FlexionNode';
    import { mergeRegister } from '@flexion/utils';
    import { COMMAND_PRIORITY_{Priority} } from 'flexion';
    import { {COMMAND_NAME}_COMMAND, {CommandNamePascal}Payload } from '../../commands';

    export const Flexion{DataType}{ViewType}Plugin = memo(function Flexion{DataType}{ViewType}Plugin() {
        const [flexion] = useFlexionComposerContext();

        useEffect(() => {
            return mergeRegister(
                flexion.registerCommand(
                    {COMMAND_NAME}_COMMAND,
                    (payload: {CommandNamePascal}Payload) => {
                        // business logic
                        return false;
                    },
                    COMMAND_PRIORITY_{Priority},
                ),
                // ... other registerCommand calls
            );
        }, [flexion]);

        return null;
    });
    ```

### 3.4. ë·°(View) ìƒì„±

#### 3.4.1. `views/Base{DataType}View.tsx`

-   **ê·œì¹™**: `'../../base/BaseNodeView'` ê²½ë¡œì—ì„œ `BaseNodeView`ë¥¼ `import`í•˜ì—¬ ìƒì†ë°›ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.
-   **ì½”ë“œ í…œí”Œë¦¿**:

    ```typescript
    import { FlexionDecoratorNode } from 'flexion';
    import { BaseNodeView } from '../../base/BaseNodeView';
    import {Flexion{DataType}CodeNodeData, Flexion{DataType}CodeNodeState} from '../types';

    export abstract class Base{DataType}View extends BaseNodeView<
        Flexion{DataType}Node,
        Flexion{DataType}CodeNodeData,
        Flexion{DataType}CodeNodeState
    > {
        constructor(node: FlexionDecoratorNode<any, any, any>) {
            super(node);
        }
        abstract getComponent(): React.ReactElement;
    }
    ```

#### 3.4.2. `views/{DataType}ViewFactory.ts`

    - **ê·œì¹™**:
    1. `switch` ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ `view_type`ì— ë”°ë¼ ì ì ˆí•œ View ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤. `case`ëŠ” í…œí”Œë¦¿ì— ì •ì˜ëœ ëª¨ë“  `view_type`ì— ëŒ€í•´ ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤.
    2. **(ì¤‘ìš”) `default` ì¼€ì´ìŠ¤ ì²˜ë¦¬**:
        - í…œí”Œë¦¿ config íŒŒì¼ ì¤‘ `view_type`ì´ `'default'`ì¸ ê²ƒì´ **ìˆëŠ” ê²½ìš°**: `switch` ë¬¸ì˜ `default`ì—ì„œ í•´ë‹¹ `Default{DataType}View` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” ëª…ì‹œì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì§€ ì•Šì€ `view_type`ì— ëŒ€í•œ ê¸°ë³¸ê°’ ì—­í• ì„ í•©ë‹ˆë‹¤.
        - `view_type`ì´ `'default'`ì¸ config íŒŒì¼ì´ **ì—†ëŠ” ê²½ìš°**: `switch` ë¬¸ì˜ `default`ì—ì„œëŠ” `throw new Error('Unsupported view type');`ë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.

-   **ì½”ë“œ í…œí”Œë¦¿ ì˜ˆì‹œ**:

    -   **`view_type: 'default'`ê°€ ìˆëŠ” ê²½ìš°**:

        ```typescript
        import {EN_VIEW_TYPE, BaseNodeView} from 'FlexionNode';
        import {Flexion{DataType}Node} from '../Flexion{DataType}Node';

        import {Anchor{DataType}View} from './anchor';
        import {Default{DataType}View} from './default';

        export function create{DataType}View(
            node: Flexion{DataType}Node,
            view_type: EN_VIEW_TYPE
        ): BaseNodeView {
            switch (view_type) {
                case EN_VIEW_TYPE.Anchor:
                    return new Anchor{DataType}View(node);
                default:
                    return new Default{DataType}View(node);
            }
        }
        ```

    -   **`view_type: 'default'`ê°€ ì—†ëŠ” ê²½ìš°**:

        ```typescript
        import {EN_VIEW_TYPE, BaseNodeView} from 'FlexionNode';
        import {Flexion{DataType}Node} from '../Flexion{DataType}Node';

        import {Anchor{DataType}View} from './anchor';
        import {Image{DataType}View} from './image';

        export function create{DataType}View(
            node: Flexion{DataType}Node,
            view_type: EN_VIEW_TYPE
        ): BaseNodeView {
            switch (view_type) {
                case EN_VIEW_TYPE.Anchor:
                    return new Anchor{DataType}View(node);
                case EN_VIEW_TYPE.Image:
                    return new Image{DataType}View(node);
                default:
                    throw new Error('Unsupported view type');
            }
        }
        ```

#### 3.4.3. `views/{view_type}/{ViewType}{DataType}View.tsx`

    - **ê·œì¹™**:
    1.  `Base{DataType}View`ë¥¼ ìƒì†ë°›ìŠµë‹ˆë‹¤.
    2.  `getComponent()` ë©”ì„œë“œëŠ” `this.getState()`ì™€ `this.getData()`ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ë©°, ê¸°ë³¸ì ìœ¼ë¡œ `<div>ì»´í¬ë„ŒíŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</div>`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    3.  í…œí”Œë¦¿ì— ì •ì˜ëœ ê° `command`ì— ëŒ€í•´, `on{EventName}` í˜•íƒœì˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ êµ¬í˜„í•˜ê³ , `this.dispatchCommand()`ë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.

-   **ì½”ë“œ í…œí”Œë¦¿**:

        ```typescript

    import React from 'react';
    import { Base{DataType}View } from '../Base{DataType}View';
    import { {COMMAND_NAME}\_COMMAND, {CommandNamePascal}Payload } from '../../commands';

    export class {ViewType}{DataType}View extends Base{DataType}View {
    getComponent(): React.ReactElement {
    const state = this.getState();
    const data = this.getData();

                return <div>ì»´í¬ë„ŒíŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</div>;
            }

        on{CommandName} = (event: React.MouseEvent): void => {
            this.dispatchCommand({COMMAND_NAME}_COMMAND, {
                    dataKey: this.getDataKey(),
                value: event.currentTarget.textContent,
                });
            };
            // ... other command handlers
        }
        ```

### 3.5. ëª¨ë“ˆ ì—°ê²° (`index.ts`)

-   ê° ì„œë¸Œë””ë ‰í† ë¦¬(`commands`, `plugins`, `types`, `views` ë“±)ì™€ ìµœìƒìœ„ `{data_type}` ë””ë ‰í† ë¦¬ì˜ `index.ts` íŒŒì¼ ë‚´ìš©ì„ `export * from '...'` êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ìƒì„±í•©ë‹ˆë‹¤.
-   `packages/30.flexion-node/src/nodes/index.ts` ì—ë„ ìƒˆë¡œìš´ `{data_type}` ëª¨ë“ˆì„ `export` í•˜ëŠ” ë¼ì¸ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

## Step 4: íŒŒì¼ ì‹œìŠ¤í…œ ì ìš© (File System Application)

**[ì—­í• ]**: Step 3ì˜ **"íŒŒì¼ ë‚´ìš© ëª©ë¡"**ì„ ì‹¤ì œ íŒŒì¼ ì‹œìŠ¤í…œì— ì ìš©í•©ë‹ˆë‹¤.

1.  **íŒŒì¼ ì‘ì—… ìˆ˜í–‰**:
    -   `status`ê°€ `ğŸŸ¢NEW` ë˜ëŠ” `âœï¸UPDATE`ì¸ íŒŒì¼ì— ëŒ€í•´ `edit_file` ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‚´ìš©ì„ ì“°ê±°ë‚˜ ìˆ˜ì •í•©ë‹ˆë‹¤.
    -   `status`ê°€ `âŒDELETE`ì¸ íŒŒì¼ì— ëŒ€í•´ `delete_file` ë„êµ¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
2.  **ë³‘í•© ê·œì¹™ ì ìš©**: `status`ê°€ `âœï¸UPDATE`ì¸ ê²½ìš°, ì•„ë˜ì˜ **íŒŒì¼ ë³‘í•© ë° ì—…ë°ì´íŠ¸ ê·œì¹™**ì„ ì¤€ìˆ˜í•˜ì—¬ `edit_file` ë„êµ¬ë¥¼ ì •êµí•˜ê²Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

### 4.1. íŒŒì¼ ë³‘í•© ë° ì—…ë°ì´íŠ¸ ê·œì¹™

-   **ì‹ ê·œ ë‚´ìš© ì¶”ê°€**: í…œí”Œë¦¿ì— ìƒˆë¡œ ì¶”ê°€ëœ `command`, `interface` í•„ë“œ, `case` ë¬¸ ë“±ì´ ê¸°ì¡´ íŒŒì¼ì— ì—†ë‹¤ë©´ í•´ë‹¹ ë‚´ìš©ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
-   **ê¸°ì¡´ ë‚´ìš© ë³´ì¡´**: ì‚¬ìš©ìê°€ ì§ì ‘ ì¶”ê°€í•œ ì½”ë“œëŠ” ì‚­ì œë˜ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ìœ ì§€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
-   **ì„ íƒì  ì—…ë°ì´íŠ¸**: í…œí”Œë¦¿ì˜ ë‚´ìš©ì´ ë³€ê²½ëœ ê²½ìš°, íŒŒì¼ ì „ì²´ë¥¼ ë®ì–´ì“°ì§€ ì•Šê³  í•´ë‹¹ ë¶€ë¶„ë§Œ ì„ íƒì ìœ¼ë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤.
-   **`index.ts` ê´€ë¦¬**: `index.ts` íŒŒì¼ì€ í˜„ì¬ í…œí”Œë¦¿ê³¼ ê´€ë ¨ëœ `export` êµ¬ë¬¸ë§Œ ì„ íƒì ìœ¼ë¡œ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œí•´ì•¼ í•©ë‹ˆë‹¤.

## Step 5: ìµœì¢… ê²€ì¦ (Final Verification)

**[ì—­í• ]**: Step 4 ì™„ë£Œ í›„, ìƒì„±ë˜ê±°ë‚˜ ìˆ˜ì •ëœ ëª¨ë“  íŒŒì¼ì˜ ì •í•©ì„±ì„ ê²€ì¦í•˜ê³  í•„ìš”ì‹œ ìˆ˜ì •í•©ë‹ˆë‹¤.

1.  **ê²€ì¦ ì‹¤í–‰**: ì•„ë˜ **ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸**ì˜ ëª¨ë“  í•­ëª©ì„ ìˆœì„œëŒ€ë¡œ ê²€ì‚¬í•©ë‹ˆë‹¤.
2.  **ì˜¤ë¥˜ ìˆ˜ì •**: ë§Œì•½ ë‹¨ í•˜ë‚˜ì˜ í•­ëª©ì´ë¼ë„ ì‹¤íŒ¨í•  ê²½ìš°, ì¦‰ì‹œ í•´ë‹¹ ë¬¸ì œë¥¼ ìˆ˜ì •í•˜ê³  **ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì „ì²´ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ì¬ê²€ì¦**í•©ë‹ˆë‹¤.
3.  **ì™„ë£Œ**: ëª¨ë“  í•­ëª©ì´ ì—°ì†ìœ¼ë¡œ í†µê³¼í•  ë•Œê¹Œì§€ ì´ ê³¼ì •ì„ ë°˜ë³µí•©ë‹ˆë‹¤.

### 5.1. ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

-   **[ ] ë²”ìœ„ ì œí•œ**: ëª¨ë“  íŒŒì¼ ë³€ê²½ì´ `packages/30.flexion-node/src/nodes/{data_type}/` ë””ë ‰í† ë¦¬ ë‚´ì—ì„œë§Œ ì´ë£¨ì–´ì¡ŒëŠ”ê°€?
-   **[ ] ESLint ìœ íš¨ì„±**: ìƒì„±/ìˆ˜ì •ëœ ëª¨ë“  íŒŒì¼ì´ `eslint` ê²€ì‚¬ë¥¼ í†µê³¼í•˜ëŠ”ê°€?
-   **[ ] `Flexion{DataType}Node.tsx`**: ìƒì†, ì œë„¤ë¦­, í•„ìˆ˜ ë©”ì„œë“œ êµ¬í˜„ì´ ì •í™•í•œê°€?
-   **[ ] `types/`**: `NodeProps`, `NodeState`ê°€ í…œí”Œë¦¿ê³¼ ì¼ì¹˜í•˜ê²Œ ìƒì„±ë˜ì—ˆëŠ”ê°€?
-   **[ ] `views/`**: `Base{DataType}View` ìƒì† ë° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ êµ¬í˜„ì´ ì •í™•í•œê°€?
-   **[ ] `plugins/`**: `registerCommand` ì‚¬ìš© ë° ì½œë°± ë°˜í™˜ ê°’ì´ ì •í™•í•œê°€?
-   **[ ] Import ê²½ë¡œ**: ëª¨ë“  `import` êµ¬ë¬¸ì´ `Step 3.1`ì˜ ê·œì¹™ì„ ì™„ë²½í•˜ê²Œ ì¤€ìˆ˜í•˜ëŠ”ê°€?
